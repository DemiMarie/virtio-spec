\section{Device groups}\label{sec:Basic Facilities of a Virtio Device / Device groups}

It is occasionally useful to have a device control a group of
other devices. Terminology used in such cases:

\begin{description}
\item[Device group]
        or just group, includes zero or more devices.
\item[Owner device]
        or owner, the device controlling the group.
\item[Member device]
        a device within a group. The owner device itself is not
	a member of the group.
\item[Member identifier]
        each member has this identifier, unique within the group
	and used to address it through the owner device.
\item[Group type identifier]
	specifies what kind of member devices there are in a
	group, how the member identifier is interpreted
	and what kind of control the owner has.
	A given owner can control multiple groups
	of different types but only a single group of a given type,
	thus the type and the owner together identify the group.
	\footnote{Even though some group types only support
			specific transports, group type identifiers
			are global rather than transport-specific -
			a flood of new group types is not expected.}
\end{description}

\begin{note}
Each device only has a single driver, thus for the purposes of
this section, "the driver" is usually unambiguous and refers to
the driver of the owner device.  When there's ambiguity, "owner
driver" refers to the driver of the owner device, while "member
driver" refers to the driver of a member device.
\end{note}

The following group types, and their identifiers, are currently specified:
\begin{description}
\item[SR-IOV group type (0x1)]
This device group has a PCI Single Root I/O Virtualization
(SR-IOV) physical function (PF) device as the owner and includes
all its SR-IOV virtual functions (VFs) as members (see
\hyperref[intro:PCIe]{[PCIe]}).

The PF device itself is not a member of the group.

The group type identifier for this group is 0x1.

A member identifier for this group can have a value from 0x1 to
\field{NumVFs} as specified in the
SR-IOV Extended Capability of the owner device
and equals the SR-IOV VF number of the member device;
the group only exists when the \field{VF Enable} bit
in the SR-IOV Control Register within the
SR-IOV Extended Capability of the owner device is set
(see \hyperref[intro:PCIe]{[PCIe]}).

Both owner and member devices for this group type use the Virtio
PCI transport (see \ref{sec:Virtio Transport Options / Virtio Over PCI Bus}).
\end{description}


